%! Author = sbbfti
%! Date = 10/06/2020

\section{Methodology}\label{sec:methodology}

    The \gls{db2} has \var{all_entries_db} independent recordings from various field investigations throughout the world and it is the largest of its kind.
    \Ac{tsv} were collected using a \gls{rhrn} survey and environmental parameters were measured and logged while participants completed their survey.
    We compared the results obtained by the \ac{pmv} and the \gls{pmv-ce} with the self-reported \ac{tsv}.
%    All the results were calculated using the function pmv_ppd [6] included in pythermalcomfort v1.10.0 a Python package for thermal comfort calculations.

\subsection{Data Processing and Cleaning}\label{subsec:data-processing-and-cleaning}
The Comfort DB contains data collected by researchers in cross-sectional field studies.
However, not all researchers logged all the six parameters required to calculate the PMV.\@
We, therefore, decided to remove all entries that did not have any of the following variables: tdb, relative humidity (RH), total clothing insulation (Icl), metabolic rate (M), and airspeed (V).
These constraints filtered out approximately \qty{28}{\percent} of the data in the Comfort DB.\@
We decided to keep only entries that did not have \ac{tr} data.
However, since this is a required input, we used the following methodology to fill in missing data.
If the \ac{to} was available \ac{tr} was calculated using the following equation: 2to â€“ tdb.
Alternatively, we assumed \ac{tr} equal to \ac{tdb}.
We are aware that these assumptions may introduce an error, but removing samples without \ac{tr} would cause an additional \qty{44}{\percent} drop in the total entries in the database and there is evidence that in many conditions is possible to assume assumed \ac{tr} equal to tdb [7].
We are committed to reproducible research hence we have shared the source code and the dataset we used publicly at this URL: https://github.com/FedericoTartarini/paper-cobee-2022.git so other users can test different assumptions.

Both the \gls{55} and \gls{7730} specify a set of applicability limits, we hence filtered out those data points which did not meet the inclusion criteria of both Standards.
The limits we used to filter the data are as follows: \qty{10}{\celsius} $\leq$ \ac{tdb} $\leq$ \qty{30}{\celsius}, \qty{10}{\celsius} $\leq$ \ac{tr} $\leq$ \qty{40}{\celsius}, \qty{0}{\m\per\s} $\leq$ \ac{v} $\leq$ \qty{1}{\m\per\s}, \qty{0}{clo} $\leq$ \ac{clo} $\leq$ \qty{1.5}{clo}, 0 Pa $\leq$ water vapour partial pressure $\leq$ 2000 Pa, and \qty{1}{met} $\leq$ \ac{met} $\leq$ \qty{4}{met}.
We then calculated the adjusted total clothing insulation and relative airspeed as required by both Standards.
We used these inputs to calculate the \ac{pmv} values.

The \ac{pmv} model is only applicable when its absolute value is lower than 2 \cite{Fanger1970, iso7730}.
However, since the thermal sensation was measured with at least a seven-point scale we decided also to show entries with |\ac{tsv}| or |\ac{pmv}| $\leq$ than 3.5.
We used Python to analyse and plot the results.